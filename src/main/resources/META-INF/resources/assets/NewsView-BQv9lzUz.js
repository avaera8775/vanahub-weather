import{a as y}from"./api-BXmuLqoz.js";import{d as z,r as i,c as H,o as L,a as s,b as e,t as o,e as c,n as m,F as _,f as w,g as S,h as l,_ as D}from"./index-CDyPvys3.js";const R={class:"max-w-6xl mx-auto px-4 py-8"},J={class:"mb-8"},X={class:"text-3xl font-bold text-gray-900 dark:text-white mb-2"},q={class:"text-gray-600 dark:text-gray-300"},G={class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-6 mb-6 border border-gray-200 dark:border-gray-700"},K={class:"flex justify-between items-center mb-4"},O={class:"flex space-x-3"},Q={class:"mb-4"},W={class:"flex space-x-2"},Y=["onClick"],Z={key:0,class:"mb-4"},ee={class:"flex space-x-2 flex-wrap"},te=["onClick"],ae={key:0,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center border border-gray-200 dark:border-gray-700"},re={class:"flex justify-center items-center space-x-3"},se={class:"text-gray-600 dark:text-gray-300"},oe={key:1,class:"p-4 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800"},le={class:"text-red-800 dark:text-red-200"},ne={key:2,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm p-8 text-center border border-gray-200 dark:border-gray-700"},de={class:"text-gray-500 dark:text-gray-400"},ie={key:3,class:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700"},ge={class:"px-6 py-4 border-b border-gray-200 dark:border-gray-700"},ce={class:"text-lg font-semibold text-gray-600 dark:text-gray-300"},ue={key:0,class:"text-sm font-normal text-gray-500 dark:text-gray-400"},be={key:0,class:"text-sm text-gray-500 dark:text-gray-400 mt-1"},ve={class:"p-6 space-y-6"},ye={class:"md:w-48 flex-shrink-0"},xe={class:"w-full h-24 overflow-hidden rounded-lg bg-gray-100 dark:bg-gray-700"},he=["src","alt"],me={class:"flex-1"},ke={class:"text-lg font-semibold mb-2"},pe=["href"],_e={key:0,class:"text-gray-600 dark:text-gray-300 mb-3 line-clamp-3"},we={class:"flex items-center text-sm text-gray-500 dark:text-gray-400"},fe={key:0,class:"mx-2"},Ce={key:1,class:"px-2 py-1 bg-gray-100 dark:bg-gray-700 rounded text-xs"},Ie={key:0,class:"flex items-center justify-between px-6 py-4 bg-gray-50 border-t border-gray-200 dark:bg-gray-700 dark:border-gray-600"},Me={class:"text-sm text-gray-700 dark:text-gray-400"},Pe={class:"flex space-x-2"},Se=["disabled"],Ve=["onClick"],Ne=["disabled"],Ue=z({__name:"NewsView",setup(je){const u=i([]),f=i(!1),k=i(""),n=i(1),b=i(0),v=i(0),C=i(10),p=i(localStorage.getItem("vanahub-news-region")||"eu"),x=i(localStorage.getItem("vanahub-news-category")||"all"),d=i(localStorage.getItem("vanahub-content-type")||"news"),V=[{label:"EU",value:"eu"},{label:"US",value:"us"},{label:"JP",value:"jp"}],I=[{label:"All",value:"all"},{label:"Login Campaign",value:"login_campaign"},{label:"Version Update",value:"version_update"}],N=H(()=>{const a=Math.max(1,n.value-2),r=Math.min(b.value,n.value+2),h=[];for(let t=a;t<=r;t++)h.push(t);return h}),g=async()=>{f.value=!0,k.value="";try{if(d.value==="news"){const a=await y.getNews(p.value,x.value,n.value,C.value);u.value=a.content||[],b.value=a.totalPages||0,v.value=a.totalElements||0}else{const a=await y.getMaintenanceInfo(p.value);u.value=a||[],b.value=1,v.value=u.value.length}}catch(a){console.error("Error fetching content:",a),k.value=`Failed to load ${d.value}. Please try again.`,u.value=[]}finally{f.value=!1}},M=async a=>{d.value=a,localStorage.setItem("vanahub-content-type",a),n.value=1,await g()},U=async a=>{p.value=a,localStorage.setItem("vanahub-news-region",a),n.value=1,await g()},j=async a=>{x.value=a,localStorage.setItem("vanahub-news-category",a),n.value=1,await g()},E=async a=>{n.value=a,await g()},T=async()=>{n.value>1&&(n.value--,await g())},A=async()=>{n.value<b.value&&(n.value++,await g())},B=a=>a.imageUrl&&a.imageUrl.trim()?y.getNewsImageUrl(a.imageUrl):y.getPlaceholderImageUrl(),F=a=>{const r=a.target;r.src=y.getPlaceholderImageUrl()},$=a=>y.formatTimeAgo(a);return L(()=>{g()}),(a,r)=>{var h;return l(),s("div",R,[e("div",J,[e("h1",X,o(d.value==="news"?"Latest News":"Maintenance Information"),1),e("p",q," Stay updated with the latest FFXI "+o(d.value==="news"?"news and announcements":"maintenance schedules"),1)]),e("div",G,[r[4]||(r[4]=e("h3",{class:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-3"},"Category",-1)),e("div",K,[e("div",O,[e("button",{onClick:r[0]||(r[0]=t=>M("news")),class:m(["px-3 py-1 text-xs font-medium rounded-lg transition-colors duration-150",d.value==="news"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"])}," News ",2),e("button",{onClick:r[1]||(r[1]=t=>M("maintenance")),class:m(["px-3 py-1 text-xs font-medium rounded-lg transition-colors duration-150",d.value==="maintenance"?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"])}," Maintenance ",2)])]),e("div",Q,[r[2]||(r[2]=e("label",{class:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-2"}," Region ",-1)),e("div",W,[(l(),s(_,null,w(V,t=>e("button",{key:t.value,onClick:P=>U(t.value),class:m(["px-3 py-1 text-xs font-medium rounded-lg transition-colors duration-150",p.value===t.value?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"])},o(t.label),11,Y)),64))])]),d.value==="news"?(l(),s("div",Z,[r[3]||(r[3]=e("label",{class:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-2"}," Filter ",-1)),e("div",ee,[(l(),s(_,null,w(I,t=>e("button",{key:t.value,onClick:P=>j(t.value),class:m(["px-3 py-1 text-xs font-medium rounded-lg transition-colors duration-150 mb-1",x.value===t.value?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600"])},o(t.label),11,te)),64))])])):c("",!0)]),f.value?(l(),s("div",ae,[e("div",re,[r[5]||(r[5]=e("div",{class:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"},null,-1)),e("span",se,"Loading "+o(d.value)+"...",1)])])):k.value?(l(),s("div",oe,[r[6]||(r[6]=e("div",{class:"flex items-center space-x-2 mb-2"},[e("svg",{class:"w-5 h-5 text-red-800 dark:text-red-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})]),e("span",{class:"text-red-800 dark:text-red-200 font-medium"},"Error")],-1)),e("p",le,o(k.value),1),e("button",{onClick:g,class:"mt-3 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg transition-colors duration-200 font-medium"}," Try Again ")])):u.value.length===0?(l(),s("div",ne,[e("div",de,[r[7]||(r[7]=e("svg",{class:"w-12 h-12 mx-auto mb-4 opacity-50",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 20H5a2 2 0 01-2-2V6a2 2 0 012-2h10a2 2 0 012 2v1m2 13a2 2 0 01-2-2V7m2 13a2 2 0 002-2V9a2 2 0 00-2-2h-2m-4-3H9M7 16h6M7 8h6v4H7V8z"})],-1)),e("p",null,"No "+o(d.value)+" items found for this region.",1)])])):(l(),s("div",ie,[e("div",ge,[e("h4",ce,[S(o(d.value==="news"?"News Articles":"Maintenance Schedule")+" ",1),x.value!=="all"&&d.value==="news"?(l(),s("span",ue," - "+o((h=I.find(t=>t.value===x.value))==null?void 0:h.label),1)):c("",!0)]),v.value>0?(l(),s("p",be,o(v.value)+" items found ",1)):c("",!0)]),e("div",ve,[(l(!0),s(_,null,w(u.value,t=>(l(),s("div",{key:t.id,class:"flex flex-col md:flex-row gap-4 pb-6 border-b border-gray-200 dark:border-gray-700 last:border-b-0 last:pb-0"},[e("div",ye,[e("div",xe,[e("img",{src:B(t),alt:t.title,class:"w-full h-24 object-cover object-center rounded-lg",onError:F},null,40,he)])]),e("div",me,[e("h3",ke,[e("a",{href:t.link||t.guid,target:"_blank",class:"text-blue-600 hover:text-blue-800 dark:text-blue-400 dark:hover:text-blue-300 hover:underline"},o(t.title),9,pe)]),t.description?(l(),s("p",_e,o(t.description),1)):c("",!0),e("div",we,[r[8]||(r[8]=e("svg",{class:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)),S(" "+o($(t.createdAt||t.publicationDate))+" ",1),t.category?(l(),s("span",fe,"â€¢")):c("",!0),t.category?(l(),s("span",Ce,o(t.category),1)):c("",!0)])])]))),128))]),b.value>1?(l(),s("div",Ie,[e("div",Me," Showing "+o((n.value-1)*C.value+1)+" to "+o(Math.min(n.value*C.value,v.value))+" of "+o(v.value)+" results ",1),e("div",Pe,[e("button",{onClick:T,disabled:n.value===1,class:"px-3 py-1 text-sm text-gray-500 bg-white border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-700"}," Previous ",8,Se),(l(!0),s(_,null,w(N.value,t=>(l(),s("button",{key:t,onClick:P=>E(t),class:m(["px-3 py-1 text-sm border rounded transition-colors duration-200",t===n.value?"bg-blue-500 text-white border-blue-500":"text-gray-500 bg-white border-gray-300 hover:bg-gray-50 dark:bg-gray-800 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-700"])},o(t),11,Ve))),128)),e("button",{onClick:A,disabled:n.value===b.value,class:"px-3 py-1 text-sm text-gray-500 bg-white border border-gray-300 rounded hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed dark:bg-gray-800 dark:border-gray-600 dark:text-gray-400 dark:hover:bg-gray-700"}," Next ",8,Ne)])])):c("",!0)]))])}}}),Ae=D(Ue,[["__scopeId","data-v-a9d70cab"]]);export{Ae as default};

var p=Object.defineProperty;var m=(s,t,e)=>t in s?p(s,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):s[t]=e;var c=(s,t,e)=>m(s,typeof t!="symbol"?t+"":t,e);class ${constructor(){c(this,"newsBaseUrl","http://localhost:8082/api/v1");c(this,"weatherBaseUrl","http://localhost:8080/api/v1/weather");c(this,"apiKey","351c4884722c4a72b0a7328ff9364ca5")}async fetchWithErrorHandling(t,e={}){try{const r=await fetch(t,{...e,headers:{"Content-Type":"application/json",...e.headers}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(r){throw r}}async getNews(t="eu",e="",r=1,n=10){try{let a;e&&e!=="all"?a=`${this.newsBaseUrl}/news/category/${e}?limit=${n}&page=${r}&region=${t}`:a=`${this.newsBaseUrl}/news/latest?region=${t}`;const l=await this.fetchWithErrorHandling(a,{headers:{"x-api-key":this.apiKey}});if(e&&e!=="all"){const i=(l.content||[]).sort((o,h)=>new Date(h.publicationDate).getTime()-new Date(o.publicationDate).getTime());return{content:this.decodeHtmlEntities(i),totalPages:l.totalPages||1,totalElements:l.totalElements||0}}else{const i=(l||[]).sort((w,f)=>new Date(f.publicationDate).getTime()-new Date(w.publicationDate).getTime()),o=i.length,h=Math.ceil(o/n),u=(r-1)*n,g=Math.min(u+n,o),d=i.slice(u,g);return{content:this.decodeHtmlEntities(d),totalPages:h,totalElements:o}}}catch{return{content:[],totalPages:0,totalElements:0}}}async getMaintenanceInfo(t="eu"){try{const e=`${this.newsBaseUrl}/news/information/latest?region=${t}`,r=await this.fetchWithErrorHandling(e);return this.decodeHtmlEntities(r||[])}catch{return[]}}async getWeatherZones(){try{return await this.fetchWithErrorHandling(`${this.weatherBaseUrl}/zones`)||[]}catch{return["Jugner_Forest","La_Theine_Plateau","Rolanberry_Fields","Yuhtunga_Jungle","Yhoator_Jungle","Western_Altepa_Desert","Qufim_Island","Wajaom_Woodlands","Bhaflau_Thickets","Valkurm_Dunes","Konschtat_Highlands","Pashhow_Marshlands","Eastern_Altepa_Desert","Tahrongi_Canyon","Buburimu_Peninsula","Meriphataud_Mountains"]}}async getWeatherForecast(t,e=30){try{const r=`${this.weatherBaseUrl}/forecast/${t}/${e}`;return await this.fetchWithErrorHandling(r)||{days:[]}}catch{return{days:[]}}}async getCurrentVanaDate(){try{return await this.fetchWithErrorHandling(`${this.weatherBaseUrl}/date`)}catch{return null}}getNewsImageUrl(t){if(!t)return this.getPlaceholderImageUrl();const e=t.startsWith("/news/images/")?t.substring(13):t;return`${this.newsBaseUrl}/news/images/${e}`}getPlaceholderImageUrl(){return`${this.newsBaseUrl}/news/images/placeholder.jpg`}decodeHtmlEntities(t){return Array.isArray(t)?t.map(e=>(e.title&&(e.title=e.title.replace(/&#8211;/g,"-").replace(/&#8212;/g,"--").replace(/&#8216;/g,"'").replace(/&#8217;/g,"'").replace(/&#8220;/g,'"').replace(/&#8221;/g,'"').replace(/&#039;/g,"'")),e)):t}formatTimeAgo(t){const e=new Date(t),n=Math.floor((new Date().getTime()-e.getTime())/1e3);let a=Math.floor(n/31536e3);return a>=1?a===1?"1 year ago":`${a} years ago`:(a=Math.floor(n/2592e3),a>=1?a===1?"1 month ago":`${a} months ago`:(a=Math.floor(n/86400),a>=1?a===1?"1 day ago":`${a} days ago`:(a=Math.floor(n/3600),a>=1?a===1?"1 hour ago":`${a} hours ago`:(a=Math.floor(n/60),a>=1?a===1?"1 minute ago":`${a} minutes ago`:n<10?"just now":`${Math.floor(n)} seconds ago`))))}formatZoneName(t){return t.replace(/_/g," ")}}const _=new $;export{_ as a};

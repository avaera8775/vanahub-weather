var p=Object.defineProperty;var m=(s,e,t)=>e in s?p(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var h=(s,e,t)=>m(s,typeof e!="symbol"?e+"":e,t);class ${constructor(){h(this,"newsBaseUrl","");h(this,"weatherBaseUrl","https://vanahub-weather.onrender.com/api/v1/weather");h(this,"apiKey","")}async fetchWithErrorHandling(e,t={}){try{const r=await fetch(e,{...t,headers:{"Content-Type":"application/json",...t.headers}});if(!r.ok)throw new Error(`HTTP error! status: ${r.status}`);return await r.json()}catch(r){throw r}}async getNews(e="eu",t="",r=1,n=10){try{let a;t&&t!=="all"?a=`${this.newsBaseUrl}/news/category/${t}?limit=${n}&page=${r}&region=${e}`:a=`${this.newsBaseUrl}/news/latest?region=${e}`;const i=await this.fetchWithErrorHandling(a,{headers:{"x-api-key":this.apiKey}});if(t&&t!=="all"){const l=(i.content||[]).sort((o,c)=>new Date(c.publicationDate).getTime()-new Date(o.publicationDate).getTime());return{content:this.decodeHtmlEntities(l),totalPages:i.totalPages||1,totalElements:i.totalElements||0}}else{const l=(i||[]).sort((w,f)=>new Date(f.publicationDate).getTime()-new Date(w.publicationDate).getTime()),o=l.length,c=Math.ceil(o/n),u=(r-1)*n,g=Math.min(u+n,o),d=l.slice(u,g);return{content:this.decodeHtmlEntities(d),totalPages:c,totalElements:o}}}catch{return{content:[],totalPages:0,totalElements:0}}}async getMaintenanceInfo(e="eu"){try{const t=`${this.newsBaseUrl}/news/information/latest?region=${e}`,r=await this.fetchWithErrorHandling(t);return this.decodeHtmlEntities(r||[])}catch{return[]}}async getWeatherZones(){try{return await this.fetchWithErrorHandling(`${this.weatherBaseUrl}/zones`)||[]}catch{return["Jugner_Forest","La_Theine_Plateau","Rolanberry_Fields","Yuhtunga_Jungle","Yhoator_Jungle","Western_Altepa_Desert","Qufim_Island","Wajaom_Woodlands","Bhaflau_Thickets","Valkurm_Dunes","Konschtat_Highlands","Pashhow_Marshlands","Eastern_Altepa_Desert","Tahrongi_Canyon","Buburimu_Peninsula","Meriphataud_Mountains"]}}async getWeatherForecast(e,t=30){try{const r=`${this.weatherBaseUrl}/forecast/${e}/${t}`;return await this.fetchWithErrorHandling(r)||{days:[]}}catch{return{days:[]}}}async getCurrentVanaDate(){try{return await this.fetchWithErrorHandling(`${this.weatherBaseUrl}/date`)}catch{return null}}getNewsImageUrl(e){if(!e)return this.getPlaceholderImageUrl();const t=e.startsWith("/news/images/")?e.substring(13):e;return`${this.newsBaseUrl}/news/images/${t}`}getPlaceholderImageUrl(){return`${this.newsBaseUrl}/news/images/placeholder.jpg`}decodeHtmlEntities(e){return Array.isArray(e)?e.map(t=>(t.title&&(t.title=t.title.replace(/&#8211;/g,"-").replace(/&#8212;/g,"--").replace(/&#8216;/g,"'").replace(/&#8217;/g,"'").replace(/&#8220;/g,'"').replace(/&#8221;/g,'"').replace(/&#039;/g,"'")),t)):e}formatTimeAgo(e){const t=new Date(e),n=Math.floor((new Date().getTime()-t.getTime())/1e3);let a=Math.floor(n/31536e3);return a>=1?a===1?"1 year ago":`${a} years ago`:(a=Math.floor(n/2592e3),a>=1?a===1?"1 month ago":`${a} months ago`:(a=Math.floor(n/86400),a>=1?a===1?"1 day ago":`${a} days ago`:(a=Math.floor(n/3600),a>=1?a===1?"1 hour ago":`${a} hours ago`:(a=Math.floor(n/60),a>=1?a===1?"1 minute ago":`${a} minutes ago`:n<10?"just now":`${Math.floor(n)} seconds ago`))))}formatZoneName(e){return e.replace(/_/g," ")}}const _=new $;export{_ as a};
